steps:
  - input: ':whale: Release to Maven'
    prompt: Confirm releasing this version to Maven?
    key: block-release-maven
  - name: ':speech_balloon: Notify Maven repository deployment start'
    depends_on: block-release-maven
    command:
      - echo $$NOTIFICATION_ENDPOINT
      - echo $$CHAT_WEBHOOK
      - echo "Notify gchat"
    plugins:
      - 'seek-oss/aws-sm#v2.0.0':
          env:
            NOTIFICATION_ENDPOINT:
              secret-id: stage-android-webviewsdk-buildkite
              json-key: .NOTIFICATION_ENDPOINT
            CHAT_WEBHOOK:
              secret-id: stage-android-webviewsdk-buildkite
              json-key: .CHAT_WEBHOOK
      - 'ROKT/hangouts-notify#v0.9.3':
          chat-endpoint: $$NOTIFICATION_ENDPOINT
          webhook-url: $$CHAT_WEBHOOK
          message: 'test'
          webhook-url2: ""
          webhook-key: ""
          usertoken-fail: ""
          usertoken-pass: ""
          type: ""
          card-details: ""
          rows: ""
          commit-summary:
            enabled: false
            from-commit: ""
            to-commit: ""
    agents:
      queue: stage-us-west-2-default